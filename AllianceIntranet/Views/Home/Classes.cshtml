<!---
Todo: Create viewModel that has IsRegistered property
    Create if/then for register/unregister


-->
@model IEnumerable<CEClass>
@{ AppUser user = await UserManager.GetUserAsync(User); string firstName = user.FirstName; var id = await UserManager.GetUserIdAsync(user);
}
<div class="container mt-3">
    <div class="row">
        <div class="col-12">
            <h1>Continuing Education Classes</h1>

            <table class="table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Instructor</th>
                        <th>Type</th>
                        <th>Class Title</th>
                        @if (User.IsInRole("Admin"))
                        {
                            <th>Edit Class</th>
                        }
                        else
                        {
                            <th>Register</th>
                        }
                    </tr>
                </thead>
                <tbody>
                    @foreach (var ceClass in Model)
                    {
                        <tr>
                            <td scope="row">@ceClass.Date</td>
                            <td>@ceClass.Time</td>
                            <td>@ceClass.Instructor</td>
                            <td>@ceClass.Type</td>
                            <td>@ceClass.ClassTitle</td>
                            @if (User.IsInRole("Admin"))
                            {
                                <td><a class="btn btn-primary">Edit</a></td>
                            }
                            else
                            {
                                <td><form method="post" ><input type="submit" asp-controller="Home" asp-action="RegisterClass" asp-route-id="@ceClass.Id" class="btn btn-primary" value="Register" /></form></td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>